require=function e(t,n,a){function i(s,c){if(!n[s]){if(!t[s]){var r="function"==typeof require&&require;if(!c&&r)return r(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n||e)},l,l.exports,e,t,n,a)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<a.length;s++)i(a[s]);return i}({DragonBonesCtrl:[function(e,t,n){"use strict";if(cc._RF.push(t,"87671OpZoVAOJrmP9+gJ6EC","DragonBonesCtrl"),!cc.runtime){var a=["weapon_1502b_r","weapon_1005","weapon_1005b","weapon_1005c","weapon_1005d","weapon_1005e"],i=["weapon_1502b_l","weapon_1005","weapon_1005b","weapon_1005c","weapon_1005d"];cc.Class({extends:cc.Component,editor:{requireComponent:dragonBones.ArmatureDisplay},properties:{touchHandler:{default:null,type:cc.Node},upButton:{default:null,type:cc.Node},downButton:{default:null,type:cc.Node},leftButton:{default:null,type:cc.Node},rightButton:{default:null,type:cc.Node},_bullets:[],_left:!1,_right:!1,_isJumpingA:!1,_isJumpingB:!1,_isSquating:!1,_isAttackingA:!1,_isAttackingB:!1,_weaponRIndex:0,_weaponLIndex:0,_faceDir:1,_aimDir:0,_moveDir:0,_aimRadian:0,_speedX:0,_speedY:0,_armature:null,_armatureDisplay:null,_weaponR:null,_weaponL:null,_aimState:null,_walkState:null,_attackState:null,_target:cc.p(0,0)},onLoad:function(){var e=this;this._armatureDisplay=this.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisplay.armature(),this._armatureDisplay.addEventListener(dragonBones.EventObject.FADE_IN_COMPLETE,this._animationEventHandler,this),this._armatureDisplay.addEventListener(dragonBones.EventObject.FADE_OUT_COMPLETE,this._animationEventHandler,this),this._armature.getSlot("effects_1").displayController="normal",this._armature.getSlot("effects_2").displayController="normal",this._weaponR=this._armature.getSlot("weapon_r").childArmature,this._weaponL=this._armature.getSlot("weapon_l").childArmature,this._weaponR.addEventListener(dragonBones.EventObject.FRAME_EVENT,this._frameEventHandler,this),this._weaponL.addEventListener(dragonBones.EventObject.FRAME_EVENT,this._frameEventHandler,this),this._updateAnimation(),dragonBones.WorldClock.clock.add(this._armature),this.touchHandler&&(this.touchHandler.on(cc.Node.EventType.TOUCH_START,function(t){e.attack(!0)},this),this.touchHandler.on(cc.Node.EventType.TOUCH_END,function(t){e.attack(!1)},this),this.touchHandler.on(cc.Node.EventType.TOUCH_MOVE,function(t){var n=t.getTouches()[0].getLocation();e.aim(n.x,n.y)},this)),this.upButton&&this.upButton.on(cc.Node.EventType.TOUCH_START,function(t){e.jump()},this),this.downButton&&(this.downButton.on(cc.Node.EventType.TOUCH_START,function(t){e.squat(!0)},this),this.downButton.on(cc.Node.EventType.TOUCH_END,function(t){e.squat(!1)},this),this.downButton.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e.squat(!1)},this)),this.leftButton&&(this.leftButton.on(cc.Node.EventType.TOUCH_START,function(t){e._left=!0,e._updateMove(-1)},this),this.leftButton.on(cc.Node.EventType.TOUCH_END,function(t){e._left=!1,e._updateMove(-1)},this),this.leftButton.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e._left=!1,e._updateMove(-1)},this)),this.rightButton&&(this.rightButton.on(cc.Node.EventType.TOUCH_START,function(t){e._right=!0,e._updateMove(1)},this),this.rightButton.on(cc.Node.EventType.TOUCH_END,function(t){e._right=!1,e._updateMove(1)},this),this.rightButton.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e._right=!1,e._updateMove(1)},this)),cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,n){e._keyHandler(t,!0)},onKeyReleased:function(t,n){e._keyHandler(t,!1)}},this.node)},_keyHandler:function(e,t){switch(e){case cc.KEY.a:case cc.KEY.left:this._left=t,this._updateMove(-1);break;case cc.KEY.d:case cc.KEY.right:this._right=t,this._updateMove(1);break;case cc.KEY.w:case cc.KEY.up:t&&this.jump();break;case cc.KEY.s:case cc.KEY.down:this.squat(t);break;case cc.KEY.q:t&&this.switchWeaponR();break;case cc.KEY.e:t&&this.switchWeaponL();break;case cc.KEY.space:t&&(this.switchWeaponR(),this.switchWeaponL());break;default:return}},_updateMove:function(e){this._left&&this._right?this.move(e):this._left?this.move(-1):this._right?this.move(1):this.move(0)},move:function(e){this._moveDir!==e&&(this._moveDir=e,this._updateAnimation())},jump:function(){this._isJumpingA||(this._isJumpingA=!0,this._armature.animation.fadeIn("jump_1",-1,-1,0,"normal"),this._walkState=null)},squat:function(e){this._isSquating!==e&&(this._isSquating=e,this._updateAnimation())},attack:function(e){this._isAttackingA!=e&&(this._isAttackingA=e)},switchWeaponL:function(){this._weaponL.removeEventListener(dragonBones.EventObject.FRAME_EVENT,this._frameEventHandler,this),this._weaponLIndex=(this._weaponLIndex+1)%i.length;var e=i[this._weaponLIndex];this._weaponL=this._armatureDisplay.buildArmature(e),this._armature.getSlot("weapon_l").childArmature=this._weaponL,this._weaponL.addEventListener(dragonBones.EventObject.FRAME_EVENT,this._frameEventHandler,this)},switchWeaponR:function(){this._weaponR.removeEventListener(dragonBones.EventObject.FRAME_EVENT,this._frameEventHandler,this),this._weaponRIndex=(this._weaponRIndex+1)%a.length;var e=a[this._weaponRIndex];this._weaponR=this._armatureDisplay.buildArmature(e),this._armature.getSlot("weapon_r").childArmature=this._weaponR,this._weaponR.addEventListener(dragonBones.EventObject.FRAME_EVENT,this._frameEventHandler,this)},aim:function(e,t){this._aimDir=100,this._target=this.node.parent.convertToNodeSpaceAR(cc.p(e,t))},update:function(e){this._updatePosition(),this._updateAim(),this._updateAttack(),this._enterFrameHandler(e)},onDisable:function(){for(var e=this._bullets.length-1;e>=0;e--)this._bullets[e].doClean();this._bullets=[],this._armature&&dragonBones.WorldClock.clock.remove(this._armature)},addBullet:function(e){this._bullets.push(e)},_enterFrameHandler:function(e){for(var t=this._bullets.length-1;t>=0;t--)this._bullets[t].update()&&this._bullets.splice(t,1);dragonBones.WorldClock.clock.advanceTime(e)},_animationEventHandler:function(e){e.type===dragonBones.EventObject.FADE_IN_COMPLETE?"jump_1"===e.detail.animationState.name?(this._isJumpingB=!0,this._speedY=20,this._armature.animation.fadeIn("jump_2",-1,-1,0,"normal")):"jump_4"===e.detail.animationState.name&&this._updateAnimation():e.type===dragonBones.EventObject.FADE_OUT_COMPLETE&&"attack_01"===e.detail.animationState.name&&(this._isAttackingB=!1,this._attackState=null)},_frameEventHandler:function(e){if("onFire"===e.detail.name){var t=e.detail.armature.getBone("firePoint"),n=cc.p(t.global.x,-t.global.y),a=e.detail.armature.display.convertToWorldSpace(n);this._fire(a)}},_fire:function(e){},_updateAnimation:function(){if(!this._isJumpingA)return this._isSquating?(this._speedX=0,this._armature.animation.fadeIn("squat",-1,-1,0,"normal"),void(this._walkState=null)):void(0===this._moveDir?(this._speedX=0,this._armature.animation.fadeIn("idle",-1,-1,0,"normal"),this._walkState=null):(this._walkState||(this._walkState=this._armature.animation.fadeIn("walk",-1,-1,0,"normal")),this._moveDir*this._faceDir>0?this._walkState.timeScale=1.4:this._walkState.timeScale=-1,this._moveDir*this._faceDir>0?this._speedX=5.04*this._faceDir:this._speedX=-3.6*this._faceDir))},_updatePosition:function(){if(0!==this._speedX){this.node.x+=this._speedX;var e=-cc.visibleRect.width/2,t=cc.visibleRect.width/2;this.node.x<e?this.node.x=e:this.node.x>t&&(this.node.x=t)}0!=this._speedY&&(this._speedY>5&&this._speedY+-.6<=5&&this._armature.animation.fadeIn("jump_3",-1,-1,0,"normal"),this._speedY+=-.6,this.node.y+=this._speedY,this.node.y<-200&&(this.node.y=-200,this._isJumpingA=!1,this._isJumpingB=!1,this._speedY=0,this._speedX=0,this._armature.animation.fadeIn("jump_4",-1,-1,0,"normal"),(this._isSquating||this._moveDir)&&this._updateAnimation()))},_updateAim:function(){this._faceDir=this._target.x>this.node.x?1:-1,this.node.scaleX*this._faceDir<0&&(this.node.scaleX*=-1,this._moveDir&&this._updateAnimation());var e=this._armature.getBone("chest").global.y*this.node.scaleY;this._faceDir>0?this._aimRadian=Math.atan2(-(this._target.y-this.node.y+e),this._target.x-this.node.x):(this._aimRadian=Math.PI-Math.atan2(-(this._target.y-this.node.y+e),this._target.x-this.node.x),this._aimRadian>Math.PI&&(this._aimRadian-=2*Math.PI));var t=0;t=this._aimRadian>0?-1:1,this._aimDir!=t&&(this._aimDir=t,this._aimDir>=0?this._aimState=this._armature.animation.fadeIn("aimUp",.1,1,1,"aim",dragonBones.AnimationFadeOutMode.SameGroup):this._aimState=this._armature.animation.fadeIn("aimDown",0,1,0,"aim",dragonBones.AnimationFadeOutMode.SameGroup)),this._aimState.weight=Math.abs(this._aimRadian/Math.PI*2)},_updateAttack:function(){this._isAttackingA&&!this._isAttackingB&&(this._isAttackingB=!0,this._attackState=this._armature.animation.fadeIn("attack_01",-1,-1,0,"attack",dragonBones.AnimationFadeOutMode.SameGroup),this._attackState.autoFadeOutTime=this._attackState.fadeTotalTime,this._attackState.addBoneMask("pelvis"))}});cc.Class({name:"DragonBullet",_speedX:0,_speedY:0,_armature:null,_armatureDisplay:null,_effect:null,init:function(e,t,n,a,i,o){this._speedX=Math.cos(a)*i,this._speedY=-Math.sin(a)*i;var s=e.convertToNodeSpace(o);if(this._armature=t,this._armatureDisplay=this._armature.display,this._armatureDisplay.setPosition(s),this._armatureDisplay.rotation=a*dragonBones.DragonBones.RADIAN_TO_ANGLE,this._armature.animation.play("idle"),n){this._effect=n;var c=this._effect.display;c.rotation=a*dragonBones.DragonBones.RADIAN_TO_ANGLE,c.setPosition(s),c.scaleX=1+1*Math.random(),c.scaleY=1+.5*Math.random(),Math.random()<.5&&(c.scaleY*=-1),this._effect.animation.play("idle"),dragonBones.WorldClock.clock.add(this._effect),e.addChild(c)}dragonBones.WorldClock.clock.add(this._armature),e.addChild(this._armatureDisplay)},update:function(){this._armatureDisplay.x+=this._speedX,this._armatureDisplay.y+=this._speedY;var e=this._armatureDisplay.parent.convertToWorldSpace(this._armatureDisplay.getPosition());return(e.x<-100||e.x>=cc.visibleRect.width+100||e.y<-100||e.y>=cc.visibleRect.height+100)&&(this.doClean(),!0)},doClean:function(){dragonBones.WorldClock.clock.remove(this._armature),this._armatureDisplay.removeFromParent(),this._armature.dispose(),this._effect&&(dragonBones.WorldClock.clock.remove(this._effect),this._effect.display.removeFromParent(),this._effect.dispose())}})}cc._RF.pop()},{}],account:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}cc._RF.push(t,"7f3450apmNIV7/iHoMO9S7S","account"),Object.defineProperty(n,"__esModule",{value:!0});var i=a(e("./player-data")),o=a(e("./game-ctl"));n.default=function(){var e={};return e.playerData=(0,i.default)(),e.gameCtl=(0,o.default)(),e},t.exports=n.default,cc._RF.pop()},{"./game-ctl":"game-ctl","./player-data":"player-data"}],audio:[function(e,t,n){"use strict";cc._RF.push(t,"42164AmjT5BvrOmurl6HH0A","audio"),cc._RF.pop()},{}],coin:[function(e,t,n){"use strict";cc._RF.push(t,"69738LqiS5OLKbwtryk3n4y","coin");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./../../global"));cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.initPos=this.node.position,this.node.dead=!1,this.p=this.node.convertToNodeSpace(cc.p(-212,200)),this.actionFlyToPlayer=cc.moveTo(1.5,this.p),this.node.on("fly",function(){if(!e.flying){e.dead=!0;var t=cc.bezierTo(.3,[e.node.position,cc.p(e.node.x,e.node.y+200),cc.p(-530,350)]);e.node.runAction(cc.sequence(t,cc.callFunc(function(){cc.log("动作结束")}))),e.node.runAction(cc.scaleTo(.5,0))}}),this.node.on("pause",function(){e.node.getComponent(cc.Animation).pause()}),this.node.on("resume",function(){e.node.getComponent(cc.Animation).resume()})},onEnable:function(){cc.log("on enable"),this.node.position=this.initPos,this.node.scale=1,this.flying=!1},onDestroy:function(){cc.log("销毁硬笔")},update:function(e){this.dead||this.flying||a.default.account.gameCtl.state()===GameState.quick&&(this.flying=!0,this.node.runAction(this.actionFlyToPlayer))}}),cc._RF.pop()},{"./../../global":"global"}],"dargon-bone-ctl":[function(e,t,n){"use strict";cc._RF.push(t,"02b25Bv/3ZNeqKzB3ii561U","dargon-bone-ctl");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./../../global")),i={invalid:-1,default:1,idle:2,walk:3,run:4,jump:5,attack:6};cc.Class({extends:cc.Component,editor:{requireComponent:dragonBones.ArmatureDisplay},properties:{defaultAnimate:"",idleAnimate:"",walkAnimate:"",jumpAnimate:"",attackAnimate:"",happyWalkAnimate:"",angryWalkAnimate:"",saidWalkAnimate:""},onLoad:function(){var e=this;this.displayTimeScale=1,this._armatureDisplay=this.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisplay.armature(),this._armatureDisplay.addEventListener(dragonBones.EventObject.FADE_IN_COMPLETE,this.animateCompleteListener,this),dragonBones.WorldClock.clock.add(this._armature),this.state=i.invalid,a.default.account.gameCtl.event.on("jump",function(t){cc.log("跳起来"),e.setState(i.jump)}),this.node.parent.on("jump-end",function(){cc.log("跳起来结束"+e.oldState),e.oldState!==i.walk&&e.oldState!==i.default||e.setState(i.walk)}),this.node.parent.on("walk",function(t){cc.log("走路"),e.setState(i.walk)}),this.node.parent.on("idle",function(t){cc.log("动画播放，idle"),e.animateSpeed=t.detail,e.setState(i.idle)}),this.node.parent.on("attack",function(t){cc.log("播放攻击动画"),e.setState(i.attack)}),this.node.parent.on("pause",function(){e._armatureDisplay.timeScale=0}),this.node.parent.on("resume",function(){e._armatureDisplay.timeScale=1}),this.node.parent.on("time-scale",function(t){cc.log("animation time scale:",t.detail),e._armatureDisplay.timeScale=t.detail}),a.default.account.gameCtl.onRun(function(){e.setState(i.default)}),this.setState(i.default)},animateFrameListener:function(){},animateCompleteListener:function(e){cc.log("播放动画完成"),cc.log("event = "+e.type)},idle:function(){},walk:function(){this.setState(i.walk)},jump:function(){},attack:function(){},playAnimate:function(e){},setState:function(e){if(this.state!==e){switch(this.oldState=this.state,e){case i.default:this._armature.animation.fadeIn(this.defaultAnimate,.2,-1,0);break;case i.jump:this._armature.animation.fadeIn(this.jumpAnimate,0,1,0);break;case i.walk:cc.log("dragon bone walk"),this._armature.animation.fadeIn(this.walkAnimate,.2,-1,0);break;case i.run:break;case i.idle:cc.log("播放idle 动画"),this._armature.animation.fadeIn(this.idleAnimate,.2,-1,0);break;case i.attack:this._armatureDisplay.timeScale*=1.3,this._armature.animation.fadeIn(this.attackAnimate,0,1,0)}this.state=e}}}),cc._RF.pop()},{"./../../global":"global"}],"distance-node":[function(e,t,n){"use strict";cc._RF.push(t,"30f99ozJhdG6otDIK90xCYl","distance-node"),cc.Class({extends:cc.Component,properties:{numSpriteFrameList:{default:[],type:cc.SpriteFrame},mileIcon:{default:null,type:cc.Node}},onLoad:function(){var e=this;this.numNodeMap={},this.setNumber(0),this.node.on("distance-change",function(t){var n=t.detail;e.setNumber(n)})},setNumber:function(e){for(var t=e+"",n=t.length-1;n>=0;n--){var a=t[n];this.numNodeMap.hasOwnProperty(n)?this.numNodeMap[n].getComponent(cc.Sprite).spriteFrame=this.numSpriteFrameList[a]:(this.numNodeMap[n]=new cc.Node("node"),this.numNodeMap[n].parent=this.node,this.numNodeMap[n].addComponent(cc.Sprite).spriteFrame=this.numSpriteFrameList[a],this.numNodeMap[n].x+=this.numNodeMap[n].width*n,this.mileIcon.x=this.numNodeMap[n].x+.5*this.numNodeMap[n].width+.5*this.mileIcon.width)}}}),cc._RF.pop()},{}],enemy:[function(e,t,n){"use strict";cc._RF.push(t,"6fd26qTZ8FGY7zOpQdIanzO","enemy");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./../../global")),i={invalid:-1,run:1,tipsBegan:2,tipsEnd:3};cc.Class({extends:cc.Component,properties:{body:cc.Node},onLoad:function(){var e=this,t=this;this.state=i.invalid,this.setState(i.run),this.body.getComponent(dragonBones.ArmatureDisplay).playAnimation("idle_1",-1),this.node.on("fly",function(){cc.log("飞走");var t=cc.bezierTo(.5,[cc.p(78,9),cc.p(86,302),cc.p(418,600)]),n=cc.rotateTo(.5,1440),a=cc.scaleTo(.5,.2,.2),i=cc.callFunc(function(){cc.log("enemy dead"),e.node.dead=!0});e.node.runAction(cc.sequence(cc.spawn([t,n,a]),i)),e.node.getComponent(cc.BoxCollider).enabled=!1,e.node.isFly=!0}),a.default.account.gameCtl.onTipsEnd(function(e){"fail"===e.result?t.body.getComponent(dragonBones.ArmatureDisplay).playAnimation("idle_2",-1):t.body.getComponent(dragonBones.ArmatureDisplay).playAnimation("idle_3",-1)})},onEnable:function(){this.node.getComponent(cc.BoxCollider).enabled=!0,this.state=i.run,this.node.scale=1,this.body.getComponent(dragonBones.ArmatureDisplay).playAnimation("idle_1",-1)},update:function(){if(this.state===i.run&&!a.default.account.gameCtl.isQuick()){var e=cc.pDistance(this.node.position,a.default.account.playerData.playerNode.position);a.default.account.playerData.playerNode.getComponent("player");e<=800&&this.setState(i.tipsBegan)}},setState:function(e){if(this.state!==e){switch(e){case i.tipsBegan:a.default.account.gameCtl.tipsBegan()}this.state=e}},onDestroy:function(){cc.log("销毁了敌人")}}),cc._RF.pop()},{"./../../global":"global"}],"event-listener":[function(e,t,n){"use strict";cc._RF.push(t,"27680LRP6hNVauuwpZEPqWs","event-listener"),Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e){var t={};return e.on=function(e,n){t.hasOwnProperty(e)?t[e].push(n):t[e]=[n]},e.fire=function(e){if(t.hasOwnProperty(e))for(var n=t[e],a=0;a<n.length;a++){for(var i=[],o=1;o<arguments.length;o++)i.push(arguments[o]);n[a].apply(this,i)}},e.removeAllListeners=function(){t={}},e},t.exports=n.default,cc._RF.pop()},{}],foe:[function(e,t,n){"use strict";cc._RF.push(t,"aeb90821ShO/Y8WEHZiPT/Z","foe");var a=e("types").FoeTypes;e("types").TerrainTypes;cc.Class({extends:cc.Component,properties:{foeType:{default:a.Fly,type:a}},init:function(e){this.poolManager=e},update:function(e){this.node.x<-1e3&&this.poolManager.returnFoe(this.foeType,this.node)}}),cc._RF.pop()},{types:"types"}],"game-ctl":[function(e,t,n){"use strict";cc._RF.push(t,"0e892h6g+pNbLCGpl9iuQFj","game-ctl"),Object.defineProperty(n,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./../utility/event-listener")),i={invalid:-1,run:1,pause:2,resume:3,tipsBegan:4,quick:5,endScene:6};window.GameState=i;n.default=function(){var e={},t=(0,a.default)({});e.event=t;var n=i.invalid,o=void 0,s=0,c=0,r=function(e,a){if(n!==e){switch(e){case i.run:t.fire("game-run");break;case i.pause:t.fire("game-pause");break;case i.resume:t.fire("game-resume");break;case i.tipsBegan:t.fire("tips-began",a),o=-.02;break;case i.quick:t.fire("quick")}n=e}};e.pause=function(){r(i.pause)},e.run=function(){r(i.run)},e.resume=function(){r(i.resume)},e.tipsBegan=function(e){r(i.tipsBegan,e)},e.tipsEnd=function(e){cc.log("tips end = "+JSON.stringify(e)),defines.timeScale=1,r(i.resume),t.fire("tips-end",e)},e.quick=function(){r(i.quick)},e.qucikEnd=function(){t.fire("quick-end"),r(i.run)},e.onQuickEnd=function(e){t.on("quick-end",e)},e.attackEnd=function(){t.fire("attack-end")},e.onQuick=function(e){cc.log("注册加速事件"),t.on("quick",e)},e.onAttackEnd=function(e){t.on("attack-end",e)},e.onTipsBegan=function(e){cc.log("开始答题"),t.on("tips-began",e)},e.onTipsEnd=function(e){t.on("tips-end",e)},e.isRunning=function(){return n===i.run||n===i.resume||n===i.tipsBegan||n===i.quick||n===i.endScene},e.isQuick=function(){return n===i.quick},e.onPause=function(e){t.on("game-pause",e)},e.onRun=function(e){t.on("game-run",e)},e.onResume=function(e){t.on("game-resume",e)},e.onTimeScale=function(e){t.on("time-scale",e)},e.onDistanceChange=function(e){t.on("distance-change",e)},e.update=function(n){e.isRunning()&&(void 0!==o&&(defines.timeScale+=o,t.fire("time-scale",defines.timeScale),defines.timeScale<.05&&(defines.timeScale=.05,o=void 0)),c>1?(c=0,s++,t.fire("distance-change",s)):c+=n*defines.timeScale)};var u=["spring","summer","autumn","winter"],l=null,d=0;e.playerData={goldCount:0,distance:0,speedLevel:0,passedTime:0};var p=function(e){cc.director.loadScene(e,function(t,n){t?console.error(t):(cc.log("load scene["+e+"]success"),l=n)})};return e.start=function(e){p(u[d])},e.getSceneIndex=function(){return d},e.nextScene=function(){t.removeAllListeners(),d++,e.pause(),cc.log(u[d]),d>=u.length&&(d=0),p(u[d])},e.setState=r,e.state=function(){return n},e},t.exports=n.default,cc._RF.pop()},{"./../utility/event-listener":"event-listener"}],game:[function(e,t,n){"use strict";cc._RF.push(t,"60470Zt8u5IlpV9XQ29Uy5o","game");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./../global"));cc.Class({extends:cc.Component,properties:{playerNode:{default:null,type:cc.Node},uiNode:cc.Node},onLoad:function(){},start:function(){var e=this;cc.log("on game loaded");var t=cc.view.getFrameSize();cc.log(t.height,t.width),t.height/t.width>.6&&(cc.log("ipad,scale ui"),this.uiNode.scale=.75),cc.director.getCollisionManager().enabled=!0,this.animation=this.node.getComponent(cc.Animation),this.animation.on("finished",this.onAnimationFinished.bind(this)),a.default.account.gameCtl.run(),e.playerNode.emit("walk"),this.animation.play("player_in")},onAnimationFinished:function(e){},update:function(e){a.default.account.gameCtl.update(e)}}),cc._RF.pop()},{"./../global":"global"}],global:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}cc._RF.push(t,"73d90r0faZDk5ECCDFMZ5Ki","global"),Object.defineProperty(n,"__esModule",{value:!0});var i=a(e("./data/account")),o=(a(e("./utility/resources-manager")),a(e("./utility/pool-manager")),{});o.account=(0,i.default)(),n.default=o,t.exports=n.default,cc._RF.pop()},{"./data/account":"account","./utility/pool-manager":"pool-manager","./utility/resources-manager":"resources-manager"}],jump:[function(e,t,n){"use strict";cc._RF.push(t,"0d6bdpYAWZGKLd19OpjSA0E","jump");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("../../global"));cc.Class({extends:cc.Component,properties:{accY:0,jumpSpeed:0},onLoad:function(){var e=this,t=(this.accY,this.jumpSpeed);a.default.account.gameCtl.event.on("speed-changed",function(n){0===n.currentLevel?e.jumpSpeed=t:e.jumpSpeed=e.jumpSpeed}),a.default.account.gameCtl.event.on("jump",this.jump.bind(this)),this.initPosY=this.node.position.y,this.timeSubSpeed=0},jump:function(){cc.log("on jump"),void 0===this.speedY&&(this.speedY=this.jumpSpeed)},playJumpSound:function(e){this.playedSound||(this.playedSound=!0,cc.audioEngine.play(e,!1,1))},update:function(e){void 0!==this.speedY&&(this.node.position=cc.p(this.node.position.x,this.node.position.y+this.speedY*e*defines.timeScale),this.speedY+=this.accY*e*defines.timeScale),this.node.position.y<=this.initPosY&&void 0!==this.speedY&&(this.node.position=cc.p(this.node.position.x,this.initPosY),this.speedY=void 0,cc.log("落地"),this.node.emit("jump-end"),this.playedSound=!1)}}),cc._RF.pop()},{"../../global":"global"}],main:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}cc._RF.push(t,"c125f5ldmhPmLM51YlELfYg","main");var i=a(e("./global")),o=a(e("./data/account"));cc.Class({extends:cc.Component,properties:{labelGold:cc.Label},onLoad:function(){var e=cc.view.getFrameSize();75===parseInt(e.width/e.height*100)&&cc.log("4:3"),this.labelGold&&(this.labelGold.string=i.default.account.playerData.goldCount),this.role=0},onToggleChecked:function(e,t){this.role=t,cc.log(this.role)},start:function(){},onEnterGameClicked:function(){this.node.getComponent(cc.Animation).play("choose_layer_fade_out"),i.default.account=(0,o.default)(),i.default.account.playerData.role=parseInt(this.role),cc.director.loadScene("spring",function(e,t){e?console.error(e):cc.log("load scene["+name+"]success")})}}),cc._RF.pop()},{"./data/account":"account","./global":"global"}],"my-pool":[function(e,t,n){"use strict";cc._RF.push(t,"51eeaXDvFNGVaQuzXuZHsFU","my-pool");var a=e("node-pool");e("types").FoeTypes;cc.Class({extends:cc.Component,properties:{foePools:{default:[],type:a},terrainPools:{default:[],type:a},superTerrainPool:a},onLoad:function(){for(var e=0;e<this.foePools.length;++e)this.foePools[e].init();for(var t=0;t<this.terrainPools.length;++t)this.terrainPools[t].init();this.superTerrainPool.init()},requestFoe:function(e){var t=this.foePools[e];return t.idx>=0?t.request():null},returnFoe:function(e,t){var n=this.foePools[e];n.idx<n.size?n.return(t):cc.log("Return obj to a full pool, something has gone wrong")},requestTerrain:function(e){cc.log("request terrain type:%d,length:%d",e,this.terrainPools.length);var t=this.terrainPools[e];return t.idx>=0?t.request():null},returnTerrain:function(e,t){cc.log("return terrain type:%d,length:%d",e,this.terrainPools.length);var n=this.terrainPools[e];n.idx<n.size?n.return(t):cc.log("Return obj to a full pool, something has gone wrong")},requestSuperTerrain:function(){var e=this.superTerrainPool;return e.idx>=0?e.request():null},returnSuperTerrain:function(e){var t=this.superTerrainPool;t.idx<t.size?t.return(e):cc.log("Return obj to a full pool, something has gone wrong")}}),cc._RF.pop()},{"node-pool":"node-pool",types:"types"}],"node-pool":[function(e,t,n){"use strict";cc._RF.push(t,"fdca8JNBNNF94drJgq8O3Yt","node-pool");var a=cc.Class({name:"node-pool",properties:{size:0,prefab:cc.Prefab},init:function(){this.list=[],this.initList=[],this.idx=0;for(var e=0;e<this.size;++e){var t=cc.instantiate(this.prefab);this.initList[e]=t,this.list[e]=t}this.idx=this.size-1},reset:function(){for(var e=0;e<this.size;++e){var t=this.initList[e];this.list[e]=t,t.active&&(t.active=!1),t.parent&&t.removeFromParent()}this.idx=this.size-1},request:function(){if(this.idx<0)return cc.log("Error: the pool do not have enough free item."),null;var e=this.list[this.idx];return e&&(e.active=!0),--this.idx,e},return:function(e){++this.idx,e.active=!1,e.parent&&e.removeFromParent(),this.list[this.idx]=e}});t.exports=a,cc._RF.pop()},{}],pauseLayer:[function(e,t,n){"use strict";cc._RF.push(t,"e38d5hWP6VOy6jvMdAyumJI","pauseLayer");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./../../global"));cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onButtonClick:function(e,t){switch(t){case"resume":a.default.account.gameCtl.resume(),this.node.destroy(),cc.audioEngine.resumeAll()}}}),cc._RF.pop()},{"./../../global":"global"}],"player-data":[function(e,t,n){"use strict";cc._RF.push(t,"cfc58NVXZFLeqvB0LKoddLU","player-data"),Object.defineProperty(n,"__esModule",{value:!0});n.default=function(){var e={};return e.titleList=[],e.goldCount=0,e.distance=0,e.sceneDistance=300,e.speedLevel=0,e.speed=500,e.passedTime=0,e.power=0,e.role=0,e.questions=[{type:2,answer_index:1,word:"bag",image_urls:["http://47.52.247.115/1.jpg","http://47.52.247.115/2.png","http://47.52.247.115/3.jpg"]},{type:1,word:"bag",image_url:"http://47.52.247.115/2.png"}],e.questionIndex=0,e},t.exports=n.default,cc._RF.pop()},{}],player:[function(e,t,n){"use strict";cc._RF.push(t,"88f81BogZJPqb+CU7HL2iBP","player");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./../global"));cc.Class({extends:cc.Component,properties:{body:{default:null,type:cc.Node},car:cc.Node,jumpAudio:cc.AudioClip,attackAudio:cc.AudioClip,eatAudio:cc.AudioClip,beAttacked:cc.AudioClip,auCar:cc.AudioClip,speeds:[cc.Float],speedLevel:0,distanceCurrentScene:0,superPowerDuration:10,superSpeed:700,rootNode:cc.Node,rolePrefabs:[cc.Prefab]},onLoad:function(){var e=this,t=this;this.passedTimeSuper=0,this.speedLevel=a.default.account.playerData.speedLevel,this.speed=a.default.account.playerData.speed,this.speedScale=1;var n=this.body;if(cc.log(a.default.account.playerData.role),a.default.account.playerData.role<this.rolePrefabs.length){var i=cc.instantiate(this.rolePrefabs[a.default.account.playerData.role]);i.position=n.position,this.node.addChild(i),this.body=i,n.removeFromParent(!0)}a.default.account.gameCtl.onTipsBegan(function(){e.preAttack()}),a.default.account.gameCtl.onTipsEnd(function(t){cc.log("on tip end，",t),a.default.account.playerData.power>=4?e.enterSuperMode():"success"===t.result?e.attack():e.cancelAttack()}),this.node.zIndex=1,a.default.account.gameCtl.event.on("jump",this.onJump.bind(this)),a.default.account.gameCtl.event.on("attack-end",function(){t.isAttacking=!1}),a.default.account.gameCtl.onPause(function(){e.node.emit("time-scale",0)}),a.default.account.gameCtl.onResume(function(){e.node.emit("time-scale",e.speedScale)}),a.default.account.playerData.playerNode=this.node},getNowSpeed:function(){return this.speeds[this.speedLevel]},onJump:function(e){cc.log("on jump audio"),this.node.getComponent("jump").playJumpSound(this.jumpAudio)},onCollisionEnter:function(e,t){if(e.getComponent("enemy")&&this.isAttacking)return cc.audioEngine.play(this.attackAudio,!1,1),void(a.default.account.gameCtl.state()!==GameState.quick?(e.node.emit("fly"),this.node.emit("walk"),this.speedLevel++,this.speedLevel=Math.min(this.speedLevel,this.speeds.length-1),this.changeSpeed(this.speeds[this.speedLevel]),a.default.account.gameCtl.attackEnd()):e.node.emit("fly"));e.getComponent("stub-tag")&&a.default.account.gameCtl.state()!==GameState.quick&&(this.speedLevel--,this.speedLevel=Math.max(this.speedLevel,0),a.default.account.playerData.power--,a.default.account.playerData.power=Math.max(a.default.account.playerData.power,0),this.changeSpeed(this.speeds[this.speedLevel]),cc.audioEngine.play(this.beAttacked,!1,1),this.body.getComponent(cc.Animation).play("be-attacked")),e.getComponent("coin")&&(cc.audioEngine.play(this.eatAudio,!1,1),e.node.emit("fly"),a.default.account.playerData.goldCount++)},changeSpeed:function(e){a.default.account.playerData.speed=e,this.speedScale=e/this.speeds[0],this.node.emit("time-scale",this.speedScale),a.default.account.gameCtl.event.fire("speed-changed",{currentLevel:this.speedLevel,maxLevel:this.speeds.length-1,speedValue:e})},preAttack:function(){this.changeSpeed(30)},cancelAttack:function(){this.changeSpeed(this.speeds[this.speedLevel])},attack:function(){this.changeSpeed(this.speeds[this.speedLevel]),this.node.emit("attack"),this.isAttacking=!0},enterSuperMode:function(){this.body.active=!1,this.car.active=!0,this.isAttacking=!0,this.car.getComponent(dragonBones.ArmatureDisplay).playAnimation("run_"+(a.default.account.playerData.role+1),-1),this.passedTimeSuper=0,a.default.account.gameCtl.quick(),a.default.account.playerData.power=0,this.carAudiosID=cc.audioEngine.play(this.auCar,!0),this.changeSpeed(this.superSpeed)},exitSuperMode:function(){this.passedTimeSuper=0,this.body.active=!0,this.car.active=!1,this.isAttacking=!1,this.carAudiosID&&cc.audioEngine.stop(this.carAudiosID),a.default.account.gameCtl.qucikEnd(),this.changeSpeed(this.speeds[this.speedLevel])},update:function(e){if(a.default.account.gameCtl.isRunning()&&a.default.account.gameCtl.state()!==GameState.tipsBegan){var t=0;if(a.default.account.gameCtl.state()!==GameState.quick?t=this.speeds[this.speedLevel]:(t=this.superSpeed,this.passedTimeSuper+=e,this.passedTimeSuper>=this.superPowerDuration&&this.exitSuperMode()),a.default.account.gameCtl.state()===GameState.endScene)return this.node.x+=t*e,void(this.node.x>600&&(this.node.active=!1,this.rootNode.active=!1,this.exitSuperMode(),a.default.account.gameCtl.nextScene()));var n=t*e/150;a.default.account.playerData.distance+=n,this.distanceCurrentScene+=n,this.distanceCurrentScene>a.default.account.playerData.sceneDistance&&a.default.account.gameCtl.state()!==GameState.endScene&&(this.rootNode.getComponent(cc.Animation).play("player_out"),a.default.account.gameCtl.setState(GameState.endScene))}},onDisable:function(){this.carAudiosID&&cc.audioEngine.stop(this.carAudiosID)}}),cc._RF.pop()},{"./../global":"global"}],"pool-manager":[function(e,t,n){"use strict";cc._RF.push(t,"fc79bJsEulMzJmmovwARlL5","pool-manager"),Object.defineProperty(n,"__esModule",{value:!0});n.default=function(){var e={},t={},n={};return e.createPool=function(e,a,i){if(!t.hasOwnProperty(e)){t[e]=new cc.NodePool,n[e]=a;var o=5;i&&(o=i);for(var s=0;s<o;s++){var c=cc.instantiate(a);t[e].put(c)}}},e.getNode=function(e){var a=null;return t.hasOwnProperty(e)?(t[e].size()>0?a=t[e].get():(a=cc.instantiate(n[e]),t[e].put(a)),a):null},e.putNode=function(e,n){t.hasOwnProperty(e)&&t[e].put(n)},e},t.exports=n.default,cc._RF.pop()},{}],"resources-manager":[function(e,t,n){"use strict";cc._RF.push(t,"e6b76+5sa1COIL89xTdsJxz","resources-manager"),Object.defineProperty(n,"__esModule",{value:!0});n.default=function(){var e={};e.resources={};var t=function(e,t){cc.loader.loadRes(e,function(n,a){n&&cc.log("err ="+JSON.stringify(n)),t&&t(e,a)})};return e.loadList=function(n,a){for(var i=0,o=0;o<n.length;o++)t(n[o],function(t,o){e.resources[t]=o,++i===n.length&&a&&a()})},e},t.exports=n.default,cc._RF.pop()},{}],"scroll-once":[function(e,t,n){"use strict";cc._RF.push(t,"93bf1dQ9TJE6YtgBQrp2Ojr","scroll-once");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./../../global"));cc.Class({extends:cc.Component,properties:{bgList:{default:[],type:cc.Node},bgSpeed:0,speedOffset:0,bgType:"middle",speedScaleRate:0},onLoad:function(){var e=this;"middle"===e.bgType&&(e.bgSpeed=a.default.account.playerData.speed+e.speedOffset),"forward"===e.bgType&&(e.bgSpeed=1.1*a.default.account.playerData.speed+e.speedOffset),"after"===e.bgType&&(e.bgSpeed=.8*a.default.account.playerData.speed+e.speedOffset),a.default.account.gameCtl.event.on("speed-changed",function(t){"middle"===e.bgType&&(cc.log("on speed changed,",t.speedValue),e.bgSpeed=t.speedValue+e.speedOffset),"forward"===e.bgType&&(cc.log("on speed changed,",t.speedValue),e.bgSpeed=1.1*t.speedValue+e.speedOffset),"after"===e.bgType&&(cc.log("on speed changed,",t.speedValue),e.bgSpeed=.8*t.speedValue+e.speedOffset),t.speedValue<=0&&(e.bgSpeed=0)})},update:function(e){if(a.default.account.gameCtl.isRunning()&&!(this.bgList.length<=0)&&a.default.account.gameCtl.state()!==GameState.endScene){var t=this.bgSpeed*e;for(var n in this.bgList)this.bgList[n].x-=t}}}),cc._RF.pop()},{"./../../global":"global"}],scroll:[function(e,t,n){"use strict";cc._RF.push(t,"80a351DW0ZOAY4jrUIzlhBr","scroll");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./../../global"));cc.Class({extends:cc.Component,properties:{bgList:{default:[],type:cc.Node},bgSpeed:0,bgType:"middle",speedScaleRate:0,speedOffset:0},onLoad:function(){var e=this;"middle"===e.bgType&&(e.bgSpeed=a.default.account.playerData.speed+e.speedOffset),"forward"===e.bgType&&(e.bgSpeed=a.default.account.playerData.speed+80+e.speedOffset),"after"===e.bgType&&(e.bgSpeed=a.default.account.playerData.speed-200+e.speedOffset),a.default.account.gameCtl.event.on("speed-changed",function(t){"middle"===e.bgType&&(cc.log("on speed changed,",t.speedValue),e.bgSpeed=t.speedValue+e.speedOffset),"forward"===e.bgType&&(cc.log("on speed changed,",t.speedValue),e.bgSpeed=1.1*t.speedValue+e.speedOffset),"after"===e.bgType&&(cc.log("on speed changed,",t.speedValue),e.bgSpeed=.8*t.speedValue+e.speedOffset),t.speedValue<=0&&(e.bgSpeed=0)})},update:function(e){if(a.default.account.gameCtl.isRunning()&&a.default.account.gameCtl.state()!==GameState.endScene){var t=this.bgSpeed*e;for(var n in this.bgList)this.bgList[n].x-=t;if(this.bgList[0].x<=-1e3){var i=this.bgList.shift(),o=this.bgList[this.bgList.length-1];i.x=o.x+o.width,this.bgList.push(i)}}}}),cc._RF.pop()},{"./../../global":"global"}],"stub-controller":[function(e,t,n){"use strict";cc._RF.push(t,"2810dnFOCtJC7nz/gCPht7h","stub-controller");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("../global")),i=e("types").FoeTypes,o=e("types").TerrainTypes;cc.Class({extends:cc.Component,properties:{ratesShowTerrain:[cc.Float],distanceAddStub:10,intervalAddWordEnemy:3,intervalAddFlyEnemy:8,durationAddSuperTerrain:1,initPosNodeTerrain:cc.Node,initPosNodeActiveEnemy:cc.Node},onLoad:function(){this.passedTimeForSuper=0,this.totalTerrains=0,this.poolManager=this.node.getComponent("my-pool")},randTerrain:function(e,t){if(o.Terrain6+1===t.length){for(var n=Math.random(),a=null,i=0;i<t.length;i++){if(i>=t.length-1){(a=this.poolManager.requestTerrain(i)).getComponent("terrain").init(this.poolManager);break}if(n<t[i]){(a=this.poolManager.requestTerrain(i)).getComponent("terrain").init(this.poolManager);break}}return a}console.error("terrainList and rateList must have same length")},update:function(e){if(a.default.account.gameCtl.isRunning()&&a.default.account.gameCtl.state()!==GameState.tipsBegan){if(a.default.account.gameCtl.state()===GameState.quick&&(this.passedTimeForSuper-=e,this.passedTimeForSuper<=0)){cc.log("add super terrain"),this.passedTimeForSuper=this.durationAddSuperTerrain;var t=this.poolManager.requestSuperTerrain();return t.getComponent("super-terrain").init(this.poolManager),t.position=this.initPosNodeTerrain.position,void(t.parent=this.initPosNodeTerrain.parent)}if(parseInt(a.default.account.playerData.distance%a.default.account.playerData.sceneDistance)%this.distanceAddStub==0)return this.lastTerrain?void(a.default.account.playerData.distance%a.default.account.playerData.sceneDistance>=a.default.account.playerData.sceneDistance-20||a.default.account.gameCtl.state()===GameState.endScene||this.initPosNodeTerrain.x-this.lastTerrain.x-this.lastTerrain.width<800||(this.totalTerrains%this.intervalAddWordEnemy==0&&this.totalTerrains>0?this.addWordEnemy():this.totalTerrains%this.intervalAddFlyEnemy==0&&this.totalTerrains>0?this.addActiveEnemy():this.addTerrain(),this.totalTerrains++)):(cc.log("add terain"),void this.addTerrain())}},addActiveEnemy:function(){var e=this.poolManager.requestFoe(i.Fly);e.getComponent("foe").init(this.poolManager),e.position=this.initPosNodeActiveEnemy.position,e.parent=this.initPosNodeActiveEnemy.parent},addTerrain:function(){var e=this.randTerrain(this.terrainPrefabs,this.ratesShowTerrain);e.position=this.initPosNodeTerrain.position;for(var t in e.children)e.children[t].enable=!0;e.parent=this.initPosNodeTerrain.parent,this.lastTerrain=e},addWordEnemy:function(){var e=this.poolManager.requestFoe(i.Word);e.getComponent("foe").init(this.poolManager),e.position=this.initPosNodeTerrain.position,e.parent=this.initPosNodeTerrain.parent,this.lastTerrain=e}}),cc._RF.pop()},{"../global":"global",types:"types"}],"stub-tag":[function(e,t,n){"use strict";cc._RF.push(t,"51b7dxuR9NEFLO8XP7DD1NP","stub-tag"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],stub:[function(e,t,n){"use strict";cc._RF.push(t,"23141ICrbhAh46D7my/c5US","stub");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./../../global"));cc.Class({extends:cc.Component,properties:{stubSpriteFrameList:{default:[],type:cc.SpriteFrame}},initWithData:function(e){this.node.dead=!1,this.speedX=e.speed,this.oldSpeedX=this.speedX;var t=e.isQuick;cc.log("is qucik"+t),t&&this.node.emit("quick"),this.fly=!1},onLoad:function(){var e=this;0!==this.stubSpriteFrameList.length&&(this.addComponent(cc.Sprite).spriteFrame=this.stubSpriteFrameList[0],this.node.addComponent(cc.BoxCollider).size=cc.size(this.node.width,this.node.height)),this.node.on("fly",function(){e.fly=!0,cc.log("飞走了")}),a.default.account.gameCtl.event.on("speed-changed",function(e){})},update:function(e){a.default.account.gameCtl.isRunning()&&this.speedX&&!1===this.fly&&(this.node.position=cc.p(this.node.position.x-this.speedX*e*defines.timeScale,this.node.position.y)),this.node.position.x+.5*this.node.width<-.5*cc.winSize.width&&(this.node.dead=!0)}}),cc._RF.pop()},{"./../../global":"global"}],"super-terrain":[function(e,t,n){"use strict";cc._RF.push(t,"62948ziAqdAtJy6X0JIkCvz","super-terrain");e("types").FoeTypes,e("types").TerrainTypes;cc.Class({extends:cc.Component,properties:{},init:function(e){this.poolManager=e},update:function(e){this.node.x<-2e3&&this.poolManager.returnSuperTerrain(this.node)}}),cc._RF.pop()},{types:"types"}],terrain:[function(e,t,n){"use strict";cc._RF.push(t,"879a9qu3mJIeIeHdXXAm2n1","terrain");e("types").FoeTypes;var a=e("types").TerrainTypes;cc.Class({extends:cc.Component,properties:{terrainType:{default:a.Terrain0,type:a}},init:function(e){this.poolManager=e},update:function(e){this.node.x<-2e3&&this.poolManager.returnTerrain(this.terrainType,this.node)}}),cc._RF.pop()},{types:"types"}],types:[function(e,t,n){"use strict";cc._RF.push(t,"d5942u3WkhD86Utk2AQIJth","types");var a=cc.Enum({Terrain0:-1,Terrain1:-1,Terrain2:-1,Terrain3:-1,Terrain4:-1,Terrain5:-1,Terrain6:-1}),i=cc.Enum({Fly:-1,Word:-1});t.exports={FoeTypes:i,TerrainTypes:a},cc._RF.pop()},{}],"ui-controller":[function(e,t,n){"use strict";cc._RF.push(t,"7974bCe2whCPaAR+MgXoGWu","ui-controller");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("../global"));cc.Class({extends:cc.Component,properties:{totalTime:0,progressTime:{default:null,type:cc.ProgressBar},processTimeSprite:cc.Node,btnJump:{default:null,type:cc.Node},progressSpeed:{default:null,type:cc.ProgressBar},labelCoinCount:{default:null,type:cc.Label},progressSuperPower:cc.ProgressBar,pauseLayer:{default:null,type:cc.Prefab},particle:cc.Node},start:function(){},onLoad:function(){var e=this,t=this;this.labelCoinCount.string=a.default.account.playerData.goldCount,this.progressTime.progress=(this.totalTime-a.default.account.playerData.passedTime)/this.totalTime,this.progressSuperPower.progress=a.default.account.playerData.power/4,a.default.account.gameCtl.event.on("speed-changed",function(e){t.progressSuperPower.progress=a.default.account.playerData.power/4}),a.default.account.gameCtl.event.on("quick",function(e){cc.log("quick mode begin"),t.btnJump.getComponent(cc.Button).enabled=!1}),a.default.account.gameCtl.event.on("quick-end",function(e){cc.log("game resume"),t.btnJump.getComponent(cc.Button).enabled=!0,t.progressSuperPower.progress=a.default.account.playerData.power/4}),a.default.account.gameCtl.onTipsBegan(function(n){e.btnJump.opacity=100,t.btnJump.getComponent(cc.Button).enabled=!1}),a.default.account.gameCtl.onTipsEnd(function(n){e.btnJump.opacity=255,e.node.getComponent(cc.Animation).play("speed_blink"),e.progressSuperPower.progress=a.default.account.playerData.power/4,"fail"===n.result&&(t.btnJump.getComponent(cc.Button).enabled=!0)}),a.default.account.gameCtl.onAttackEnd(function(){e.btnJump.opacity=255,t.btnJump.getComponent(cc.Button).enabled=!0}),cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,n){e._keyHandler(t,!0)},onKeyReleased:function(t,n){e._keyHandler(t,!1)}},this.node),this.isCanRun=!1},_keyHandler:function(e,t){switch(e){case cc.KEY.up:case cc.KEY.space:cc.log("跳"),255===this.btnJump.opacity&&a.default.account.gameCtl.event.fire("jump");break;case cc.KEY.enter:cc.log("加速"),this.isCanRun&&a.default.account.gameCtl.quick()}},onPauseClicked:function(){cc.instantiate(this.pauseLayer).parent=this.node,a.default.account.gameCtl.pause(),cc.audioEngine.pauseAll()},onButtonClick:function(e,t){switch(t){case"up-button":255===this.btnJump.opacity&&a.default.account.gameCtl.event.fire("jump")}},update:function(e){a.default.account.gameCtl.isRunning()&&(a.default.account.playerData.passedTime+=e,a.default.account.playerData.passedTime>=this.totalTime&&(a.default.account.gameCtl.pause(),cc.director.loadScene("rank",function(e,t){e?console.error(e):cc.log("load scene[rank]success")})),this.progressTime.progress=(this.totalTime-a.default.account.playerData.passedTime)/this.totalTime,this.particle.x=this.progressTime.node.x+this.processTimeSprite.width,this.labelCoinCount.string=a.default.account.playerData.goldCount+"")}}),cc._RF.pop()},{"../global":"global"}],ui_question_layer:[function(e,t,n){"use strict";cc._RF.push(t,"d915eFyCSdCor4UBzNBwfsh","ui_question_layer");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("../global"));cc.Class({extends:cc.Component,properties:{timeCutDownLabel:{default:null,type:cc.Label},resultLabel:{default:null,type:cc.Label},labelTip:cc.Label,labelWord:cc.Label,spAnswerList:[cc.Sprite],spReadImage:cc.Sprite,auCardIn:cc.AudioClip,auSuccess:cc.AudioClip,nodeChoose:cc.Node,nodeRead:cc.Node},getQuestion:function(){var e=a.default.account.playerData.questions;{if(!(e.length<=0))return a.default.account.playerData.questionIndex>=e.length&&(a.default.account.playerData.questionIndex=0),e[a.default.account.playerData.questionIndex];console.error("question list is empty")}},changeImageTexture:function(e,t){var n=cc.textureCache.getTextureForKey(t);n&&(e.spriteFrame.clearTexture(),e.spriteFrame.setTexture(n))},showQuestion:function(){cc.audioEngine.play(this.auCardIn);var e=this.getQuestion();if(cc.log("question:",e),this.question=e,1===e.type)this.nodeRead.active=!0,this.nodeChoose.active=!1,this.labelTip.string="读单词",this.labelWord.string=e.word,this.changeImageTexture(this.spReadImage,e.image_url),this.animation.play("an_show_question_read");else{this.nodeRead.active=!1,this.nodeChoose.active=!0,this.labelTip.string="选择答案",this.labelWord.string=e.word;for(var t=0;t<this.question.image_urls.length;t++){var n=this.question.image_urls[t],i=this.spAnswerList[t];this.changeImageTexture(i,n)}this.animation.play("an_show_question_choose")}a.default.account.playerData.questionIndex++},onLoad:function(){cc.loader.load(["http://47.52.247.115/1.jpg","http://47.52.247.115/2.png","http://47.52.247.115/3.jpg"],function(e,t){if(e)console.error(e);else for(var n in t.map)cc.textureCache.getTextureForKey(t.map[n].content)||cc.textureCache.addImage(t.map[n].content)});var e=this;this.animation=this.node.getComponent(cc.Animation),this.animation.on("finished",this.onUiAnimationFinished.bind(this)),a.default.account.gameCtl.onTipsBegan(function(t){cc.log("开始答题了"+JSON.stringify(t)),e.node.active=!0,e.timeCutDown=5,e.showQuestion()})},start:function(){this.node.active=!1},hideQuestion:function(){1===this.question.type?this.animation.play("an_hidden_question_read"):this.animation.play("an_hidden_question_choose"),a.default.account.playerData.power++,a.default.account.gameCtl.tipsEnd({result:"success"}),cc.audioEngine.play(this.auSuccess)},onUiAnimationFinished:function(e){var t=e.detail,n=e.type;t.name.indexOf("_hidden_")>=0&&"finished"===n&&(this.node.active=!1)},update:function(e){a.default.account.gameCtl.isRunning()&&this.timeCutDown>0&&(this.timeCutDown-=e,this.timeCutDown<=0&&(this.timeCutDown=0,this.resultLabel.string="真棒!",this.hideQuestion()),this.timeCutDownLabel.string=Math.floor(this.timeCutDown)+"")},onChooseAnswerClicked:function(e,t){if(parseInt(t)!==this.question.answer_index)return a.default.account.gameCtl.tipsEnd({result:"fail"}),void(this.node.active=!1);this.hideQuestion()}}),cc._RF.pop()},{"../global":"global"}]},{},["account","game-ctl","player-data","DragonBonesCtrl","dargon-bone-ctl","distance-node","foe","jump","scroll-once","scroll","stub","super-terrain","terrain","game","player","coin","enemy","pauseLayer","stub-tag","stub-controller","ui-controller","ui_question_layer","global","main","my-pool","node-pool","types","audio","event-listener","pool-manager","resources-manager"]);