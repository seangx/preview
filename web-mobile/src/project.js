require=function e(t,o,n){function r(c,s){if(!o[c]){if(!t[c]){var i="function"==typeof require&&require;if(!s&&i)return i(c,!0);if(a)return a(c,!0);var p=new Error("Cannot find module '"+c+"'");throw p.code="MODULE_NOT_FOUND",p}var l=o[c]={exports:{}};t[c][0].call(l.exports,function(e){var o=t[c][1][e];return r(o?o:e)},l,l.exports,e,t,o,n)}return o[c].exports}for(var a="function"==typeof require&&require,c=0;c<n.length;c++)r(n[c]);return r}({HelloWorld:[function(e,t,o){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({"extends":cc.Component,properties:{label:{"default":null,type:cc.Label},text:"Hello, World!"},onLoad:function(){this.label.string=this.text},update:function(e){}}),cc._RF.pop()},{}],common:[function(e,t,o){"use strict";cc._RF.push(t,"0aff6ovTK5N44pO+pA+DbVM","common");var n={liuyifei:400,eva_green:500,gakki:480};t.exports={playerInfo:{},mountInfo:{base_speed:300,float_speed:1.8,float_speed_acceleration:.05},targetInfo:{speed:400,name:"gakki"},SelectTarget:function(e){var t=["gakki","eva_green","liuyifei"][e];this.targetInfo.name=t,n[t]&&(this.targetInfo.speed=n[t])}},cc._RF.pop()},{}],game_manager:[function(e,t,o){"use strict";cc._RF.push(t,"b92e3N9npRHXaRjHudJNxd2","game_manager"),cc.Class({"extends":cc.Component,properties:{player:cc.Node,bg:cc.Node,ui:cc.Node},onLoad:function(){var e=cc.director.getCollisionManager();e.enabled=!0,console.log("init bg script");var t=this.bg.getComponent("scroll");t.init(this),console.log("init player script");var o=this.player.getComponent("player");o.init(this),console.log("init ui script");var n=this.ui.getComponent("ui");n.init(this)}}),cc._RF.pop()},{}],main:[function(e,t,o){"use strict";cc._RF.push(t,"bee3a1CvJNBoYhcZiC5zxvX","main"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],player:[function(e,t,o){"use strict";cc._RF.push(t,"10cf4JEH8FKy5o9XIyEOnR6","player");var n=e("common");cc.Class({"extends":cc.Component,properties:{MaxPlayerBaseSpeed:200,PlayerAcceleration:600,MaxSpeedFloated:1.6,SpeedFloatRecovery:.6,SpeedFloatAcceleration:.1,touchParticle:cc.ParticleSystem},onLoad:function(){this.MaxPlayerBaseSpeed=n.mountInfo.base_speed,this.MaxSpeedFloated=n.mountInfo.float_speed,this.SpeedFloatAcceleration=n.mountInfo.float_speed_acceleration},init:function(e){this.game=e,this.current_speed=0,this.enableInput=!1,this.baseSpeed=0,this.MaxSpeedFloated=n.mountInfo.float_speed,this.current_speed_float=1,this.registerInput()},registerInput:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(t,o){if(e.enableInput){var n=e.node.parent.convertTouchToNodeSpaceAR(t);return e.touchParticle.node.x=n.x,e.touchParticle.node.y=n.y,e.touchParticle.resetSystem(),e.touchParticle.enabled=!0,!0}},onTouchMoved:function(t,o){!e.enableInput},onTouchEnded:function(t,o){e.enableInput&&(e.current_speed_float+=e.SpeedFloatAcceleration,e.current_speed_float=Math.min(e.current_speed_float,e.MaxSpeedFloated),e.game.node.emit("player_speed_floating",{msg:{max:e.MaxSpeedFloated,current:e.current_speed_float}}))}},e.node)},update:function(e){this.baseSpeed+=this.PlayerAcceleration*e,this.baseSpeed>this.MaxPlayerBaseSpeed&&(this.baseSpeed=this.MaxPlayerBaseSpeed,this.enableInput=!0),this.game.node.emit("player_base_speed_change",{max:this.MaxPlayerBaseSpeed,current:this.baseSpeed}),this.current_speed_float-=this.SpeedFloatRecovery*e,this.game.node.emit("player_speed_floating",{max:this.MaxSpeedFloated,current:this.current_speed_float}),this.current_speed_float=Math.max(this.current_speed_float,1),this.current_speed=this.baseSpeed*this.current_speed_float},onCollisionEnter:function(e,t){console.log(n.playerInfo.nickname+" catch lolita!!!"),cc.director.loadScene("begin")}}),cc._RF.pop()},{common:"common"}],scroll:[function(e,t,o){"use strict";cc._RF.push(t,"2efa475NSNPNrsh+QanyzHg","scroll"),cc.Class({"extends":cc.Component,properties:{player:cc.Node},onLoad:function(){},init:function(e){this.playerController=this.player.getComponent("player")},update:function(e){for(var t=this.playerController.current_speed*e,o=0,n=0;n<this.node.childrenCount;n++){var r=this.node.children[n];r.y-=t,r.y>o&&(o=r.y)}for(var a=0;a<this.node.childrenCount;a++){var c=this.node.children[a];c.y<-(1.5*c.height)&&(c.y=o+c.height)}}}),cc._RF.pop()},{}],"simple-request":[function(e,t,o){"use strict";cc._RF.push(t,"363391WEHNNLpzBRKb/3v+U","simple-request"),Object.defineProperty(o,"__esModule",{value:!0});var n=3e4,r=r||function(){var e={};e.get=function(e,o,r,a){var c=new XMLHttpRequest,s=t(r);console.log("get string: "+e+o+s),c.open("GET",e+o+s,!0),c.timeout=n,c.onload=function(){var e=JSON.parse(c.responseText);a&&a.call(void 0,e)},c.ontimeout=function(){a&&a.call(void 0,{timeout:!0})},c.send()},e.post=function(e,o,r,a,c){var s=new XMLHttpRequest;console.log("post",e+o+t(r)),s.open("POST",e+o+t(r),!0),s.setRequestHeader("Content-Type","application/json"),s.timeout=n,s.onload=function(){var e=JSON.parse(s.responseText);c&&c.call(void 0,e)},s.ontimeout=function(){c&&c.call(void 0,{timeout:!0})},console.log("xhr.onload",a);var i=a?JSON.stringify(a):"";s.onerror=function(e){console.log("server error "+e),c&&c.call(this,{timeout:!0})},s.send(i)},e.jump=function(e,o){var n=t(o);console.log("jump to url: "+e+n),window.location.href=e+n};var t=function(e,t){var o="";if(e){var n=void 0==t||t;for(var r in e)n?(n=!1,o+="?"):o+="&",o+=r+"="+e[r]}return o};return e}();o["default"]=r,t.exports=o["default"],cc._RF.pop()},{}],target:[function(e,t,o){"use strict";cc._RF.push(t,"6a305F/xYBFj6frW/RuNUTZ","target");var n=e("common");cc.Class({"extends":cc.Component,properties:{player:cc.Node,speed:400,speakDuration:3,speakTextBox:cc.Label},onLoad:function(){console.log("target on loaded"),console.log(n.targetInfo),this.playerController=this.player.getComponent("player"),this.speak_duration_now=0,this.speed=n.targetInfo.speed;var e=this.node.getComponent(cc.Sprite);e.spriteFrame=new cc.SpriteFrame(cc.url.raw("Texture/target_"+n.targetInfo.name+".png"))},update:function(e){var t=this.speed-this.playerController.current_speed;this.node.y+=t*e,this.speak_duration_now+=e,this.speak_duration_now>this.speakDuration&&(this.speakTextBox.enabled=!1)}}),cc._RF.pop()},{common:"common"}],ui_begin:[function(e,t,o){"use strict";cc._RF.push(t,"67655elHOdPsp2u/VSmhf6P","ui_begin");var n=e("common");cc.Class({"extends":cc.Component,properties:{ebox_nickname:cc.EditBox,toggleGroup:cc.ToggleGroup},onLoad:function(){var e=this;this.node.on("touchend",function(t){if(console.log("touchend"),n.playerInfo.nickname=e.ebox_nickname.string,""==n.playerInfo.nickname)return void alert("昵称不能为空");for(var o=0;o<e.toggleGroup.toggleItems.length;o++){var r=e.toggleGroup.toggleItems[o];console.log(r.name),r.isChecked&&n.SelectTarget(o)}cc.director.loadScene("main")},this)}}),cc._RF.pop()},{common:"common"}],ui:[function(e,t,o){"use strict";cc._RF.push(t,"a191bhJYSpCOLGrL0KJ9P9a","ui");var n=e("common");cc.Class({"extends":cc.Component,properties:{speed_progress:cc.ProgressBar,speed_progress_float:cc.ProgressBar,lb:cc.Label},onLoad:function(){this.speed_progress.progress=0,this.speed_progress_float.progress=0;var e="基础速度:"+n.mountInfo.base_speed+"\n";e+="浮动速度:"+n.mountInfo.float_speed+"\n",e+="加速效果:"+n.mountInfo.float_speed_acceleration+"\n",this.lb.string=e},init:function(e){console.log(this.speed_progress),this.game=e;var t=this;t.game.node.on("player_base_speed_change",function(e){t.speed_progress.progress=e.detail.current/e.detail.max}),t.game.node.on("player_speed_floating",function(e){t.speed_progress_float.progress=(e.detail.current-1)/(e.detail.max-1)})},update:function(e){}}),cc._RF.pop()},{common:"common"}]},{},["HelloWorld","common","game_manager","simple-request","main","player","scroll","target","ui","ui_begin"]);
//# sourceMappingURL=project.js.map