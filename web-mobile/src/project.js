require=function e(t,n,o){function r(a,c){if(!n[a]){if(!t[a]){var i="function"==typeof require&&require;if(!c&&i)return i(a,!0);if(s)return s(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return r(n?n:e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({HelloWorld:[function(e,t,n){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({"extends":cc.Component,properties:{label:{"default":null,type:cc.Label},text:"Hello, World!"},onLoad:function(){this.label.string=this.text},update:function(e){}}),cc._RF.pop()},{}],game_manager:[function(e,t,n){"use strict";cc._RF.push(t,"b92e3N9npRHXaRjHudJNxd2","game_manager"),cc.Class({"extends":cc.Component,properties:{player:cc.Node,bg:cc.Node,ui:cc.Node},onLoad:function(){var e=cc.director.getCollisionManager();e.enabled=!0,console.log("init bg script");var t=this.bg.getComponent("scroll");t.init(this),console.log("init player script");var n=this.player.getComponent("player");n.init(this),console.log("init ui script");var o=this.ui.getComponent("ui");o.init(this)}}),cc._RF.pop()},{}],main:[function(e,t,n){"use strict";cc._RF.push(t,"bee3a1CvJNBoYhcZiC5zxvX","main"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],player:[function(e,t,n){"use strict";cc._RF.push(t,"10cf4JEH8FKy5o9XIyEOnR6","player"),cc.Class({"extends":cc.Component,properties:{MaxPlayerBaseSpeed:200,PlayerAcceleration:600,MaxSpeedFloated:1.6,SpeedFloatRecovery:.6,SpeedFloatAcceleration:.1,touchParticle:cc.ParticleSystem},onLoad:function(){},init:function(e){this.game=e,this.current_speed=0,this.enableInput=!1,this.baseSpeed=0,this.current_speed_float=1,this.registerInput()},registerInput:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(t,n){if(e.enableInput){var o=e.node.parent.convertTouchToNodeSpaceAR(t);return e.touchParticle.node.x=o.x,e.touchParticle.node.y=o.y,e.touchParticle.resetSystem(),e.touchParticle.enabled=!0,!0}},onTouchMoved:function(t,n){!e.enableInput},onTouchEnded:function(t,n){e.enableInput&&(e.current_speed_float+=e.SpeedFloatAcceleration,e.current_speed_float=Math.min(e.current_speed_float,e.MaxSpeedFloated),e.game.node.emit("player_speed_floating",{msg:{max:e.MaxSpeedFloated,current:e.current_speed_float}}))}},e.node)},update:function(e){this.baseSpeed+=this.PlayerAcceleration*e,this.baseSpeed>this.MaxPlayerBaseSpeed&&(this.baseSpeed=this.MaxPlayerBaseSpeed,this.enableInput=!0),this.game.node.emit("player_base_speed_change",{max:this.MaxPlayerBaseSpeed,current:this.baseSpeed}),this.current_speed_float-=this.SpeedFloatRecovery*e,this.game.node.emit("player_speed_floating",{max:this.MaxSpeedFloated,current:this.current_speed_float}),this.current_speed_float=Math.max(this.current_speed_float,1),this.current_speed=this.baseSpeed*this.current_speed_float},onCollisionEnter:function(e,t){console.log("catch lolita!!!"),cc.director.loadScene("main")}}),cc._RF.pop()},{}],scroll:[function(e,t,n){"use strict";cc._RF.push(t,"2efa475NSNPNrsh+QanyzHg","scroll"),cc.Class({"extends":cc.Component,properties:{player:cc.Node},onLoad:function(){},init:function(e){this.playerController=this.player.getComponent("player")},update:function(e){for(var t=this.playerController.current_speed*e,n=0,o=0;o<this.node.childrenCount;o++){var r=this.node.children[o];r.y-=t,r.y>n&&(n=r.y)}for(var s=0;s<this.node.childrenCount;s++){var a=this.node.children[s];a.y<-(1.5*a.height)&&(a.y=n+a.height)}}}),cc._RF.pop()},{}],target:[function(e,t,n){"use strict";cc._RF.push(t,"6a305F/xYBFj6frW/RuNUTZ","target"),cc.Class({"extends":cc.Component,properties:{player:cc.Node,speed:400,speakDuration:3,speakTextBox:cc.Label},onLoad:function(){this.playerController=this.player.getComponent("player"),this.speak_duration_now=0},update:function(e){var t=this.speed-this.playerController.current_speed;this.node.y+=t*e,this.speak_duration_now+=e,this.speak_duration_now>this.speakDuration&&(this.speakTextBox.enabled=!1)}}),cc._RF.pop()},{}],ui:[function(e,t,n){"use strict";cc._RF.push(t,"a191bhJYSpCOLGrL0KJ9P9a","ui"),cc.Class({"extends":cc.Component,properties:{speed_progress:cc.ProgressBar,speed_progress_float:cc.ProgressBar},onLoad:function(){this.speed_progress.progress=0,this.speed_progress_float.progress=0},init:function(e){console.log(this.speed_progress),this.game=e;var t=this;t.game.node.on("player_base_speed_change",function(e){t.speed_progress.progress=e.detail.current/e.detail.max}),t.game.node.on("player_speed_floating",function(e){t.speed_progress_float.progress=(e.detail.current-1)/(e.detail.max-1)})},update:function(e){}}),cc._RF.pop()},{}]},{},["HelloWorld","game_manager","main","player","scroll","target","ui"]);
//# sourceMappingURL=project.js.map